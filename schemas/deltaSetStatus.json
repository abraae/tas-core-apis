{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "definitions": {
        "app": {
            "type": "string"
        },
        "elapsedTime": {
            "description": "elapsed time of the operation in milliseconds",
            "type": "integer"
        },
        "deltaApplyStart": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "deltaApplyStart"
                    ]
                }
            }
        },
        "tenantDownStart": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "tenantDownStart"
                    ]
                }
            }
        },
        "appDownRequest": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "app"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "appDownRequest"
                    ]
                },
                "app": {
                    "$ref": "#/definitions/app"
                }
            }
        },
        "appDownComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "app"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "appDownComplete"
                    ]
                },
                "app": {
                    "$ref": "#/definitions/app"
                }
            }
        },
        "tenantDownComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "elapsedTime"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "tenantDownComplete"
                    ]
                },
                "elapsedTime": {
                    "$ref": "#/definitions/elapsedTime"
                }
            }
        },
        "applyIndividualDeltasStart": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "applyIndividualDeltasStart"
                    ]
                }
            }
        },
        "appInstallComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "app"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "appInstallComplete"
                    ]
                },
                "app": {
                    "$ref": "#/definitions/app"
                }
            }
        },
        "appEditComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "app"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "appEditComplete"
                    ]
                },
                "app": {
                    "$ref": "#/definitions/app"
                }
            }
        },
        "appUnInstallComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "app"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "appUnInstallComplete"
                    ]
                },
                "app": {
                    "$ref": "#/definitions/app"
                }
            }
        },
        "applyIndividualDeltasComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "elapsedTime"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "applyIndividualDeltasComplete"
                    ]
                },
                "elapsedTime": {
                    "$ref": "#/definitions/elapsedTime"
                }
            }
        },
        "tenantUpStart": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "tenantUpStart"
                    ]
                }
            }
        },
        "appUpComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "app"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "appUpComplete"
                    ]
                },
                "app": {
                    "$ref": "#/definitions/app"
                }
            }
        },
        "tenantUpComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "elapsedTime"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "tenantUpComplete"
                    ]
                },
                "elapsedTime": {
                    "$ref": "#/definitions/elapsedTime"
                }
            }
        },
        "deltaApplyComplete": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "kind",
                "elapsedTime",
                "newIncarnation"
            ],
            "properties": {
                "kind": {
                    "enum": [
                        "deltaApplyComplete"
                    ]
                },
                "elapsedTime": {
                    "$ref": "#/definitions/elapsedTime"
                },
                "newIncarnation": {
                    "type": "integer"
                }
            }
        },
        "orderedEvent": {
            "type": "object",
            "properties": {
                "seq": {
                    "type": "integer"
                },
                "event": {
                    "oneOf": [
                        {
                            "$ref": "#/definitions/deltaApplyStart"
                        },
                        {
                            "$ref": "#/definitions/tenantDownStart"
                        },
                        {
                            "$ref": "#/definitions/appDownRequest"
                        },
                        {
                            "$ref": "#/definitions/appDownComplete"
                        },
                        {
                            "$ref": "#/definitions/tenantDownComplete"
                        },
                        {
                            "$ref": "#/definitions/applyIndividualDeltasStart"
                        },
                        {
                            "$ref": "#/definitions/appInstallComplete"
                        },
                        {
                            "$ref": "#/definitions/appEditComplete"
                        },
                        {
                            "$ref": "#/definitions/appUnInstallComplete"
                        },
                        {
                            "$ref": "#/definitions/applyIndividualDeltasComplete"
                        },
                        {
                            "$ref": "#/definitions/tenantUpStart"
                        },
                        {
                            "$ref": "#/definitions/appUpComplete"
                        },
                        {
                            "$ref": "#/definitions/tenantUpComplete"
                        },
                        {
                            "$ref": "#/definitions/deltaApplyComplete"
                        }
                    ]
                }
            }
        }
    },
    "type": "object",
    "additionalProperties": false,
    "required": [
        "kind",
        "launchKey",
        "incarnationPrior",
        "events"
    ],
    "properties": {
        "kind": {
            "enum": [
                "deltaSetStatus"
            ]
        },
        "launchKey": {
            "type": "integer"
        },
        "applyStatus": {
            "enum": [
                "complete",
                "inProcess",
                "notLaunched"
            ]
        },
        "latestEvent": {
            "type": "integer"
        },
        "incarnationPrior": {
            "type": "integer"
        },
        "events": {
            "type": "array",
            "items": {
                "$ref": "#/definitions/orderedEvent"
            }
        }
    }
}